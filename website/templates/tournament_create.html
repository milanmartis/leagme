{% extends "base.html" %}
{% block title %}
  Leagme - Create Tournament
{% endblock %}
{% block content %}
<style scoped>
    .form-control {
        font-size: 80px;
        text-align: center;
    }

    .form-group option {
        padding-top: 16px;
        padding-bottom: 10px;
        background-color: black;
        color: #00ff00;
        font-size: 32px;
        text-align: center;
        border: 0px;
    }
    option{
        padding-top: 10px;
        padding-bottom: 10px;
        background-color: black;
        color: #00ff00;
        font-size: 82px; /* Nastavte požadovanú veľkosť písma */
    }

    select {
        background-color: black;
        cursor: pointer;
    }

    /* Farba pri hover */
    select option:hover {

    }

    /* Farba pre vybratú možnosť */
    select option:checked {
        background-color: black;
        color: white;
    }

</style>
<h1 align="center"><img src="{{ url_for('static', filename = 'img/'+ head +'.svg') }}" class="filter-green" width="290" /></h1>
<div class="content-section">
    <br>
    <form action="" method="post" class="form" role="form" enctype="multipart/form-data">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        {{ form.hidden_tag() }}
        <fieldset class="form-group">
            <div class="form-group">
                {{ form.name.label(class="form-control-label createforms") }}
                {% if form.name.errors %}
                    {{ form.name(class="form-control form-control-lg is-invalid ") }}
                    <div class="invalid-feedback">
                        {% for error in form.name.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.name(autocomplete="off", class="form-control form-control-lg  createforms") }}
                {% endif %}
            </div>

            <br>
            <div class="form-group">
                {{ form.min_players.label(class="form-control-label createforms") }}
                <select id="min_players" class="form-control form-control-lg createforms">
                    <option value="2" selected>2</option>
                    <option value="4">4</option>
                    <option value="8">8</option>
                    <option value="16">16</option>
                    <option value="32">32</option>
                    <option value="64">64</option>
                </select>
                <small id="min_players_error" class="text-danger"></small> <!-- Miesto pre chybové hlásenie -->
            </div>
            <br>
            {% if user_places %}
            <div class="form-group">
                <label for="place_select" class="form-control-label createforms">Select Place</label>
                <select style="font-size: 19px;" id="place_select" name="place_id" class="btn-reverse form-control form-control-lg createforms" require>
                    <option style="font-size: 13px;" value="">choose the venue</option>
                    {% for place in user_places %}
                        <option style="font-size: 13px; background-color: black; color: white;font-size: 13px;cursor: pointer;" value="{{ place.id }}" {% if form.place_id.data == place.id %}selected{% endif %}>
                            {{ place.name }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            {% else %}
            <br>
            <div class="form-group" style="max-width: 220px;">
                <button class="btn btn-reverse" onclick="javascript:location.href='{{ url_for('views.new_place') }}';" >Create your first place >></button>
            </div>
            {% endif %}
            <br>
            <div class="form-group">
                {{ form.open.label(class="form-control-label createforms") }}
                {% if form.open.errors %}
                    {{ form.open(class="form-control form-control-lg is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.open.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.open(class="form-control form-control-lg createforms") }}
                {% endif %}
            </div>
            <br>
            <div class="form-group">
                {{ form.visible.label(class="form-control-label createforms") }}
                {% if form.visible.errors %}
                    {{ form.visible(class="form-control form-control-lg is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in form.visible.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.visible(class="form-control form-control-lg createforms") }}
                {% endif %}
            </div>
            <input type="hidden" id="season_type" name="season_type" value="2">

           <!--

               <div class="form-group">
                   {{ form.season_from.label(class="form-control-label") }}
                   {% if form.season_from.errors %}
                   {{ form.season_from(class="form-control form-control-lg is-invalid") }}
                   <div class="invalid-feedback">
                        {% for error in form.season_from.errors %}
                        <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                    {% else %}
                    {{ form.season_from(class="datepicker form-control form-control-lg") }}
                    {% endif %}
                </div>
            -->

<br>
<br>
<br>
        </fieldset>
        <div class="form-group">
            {{ form.submit(class="btn-demo btn-outline-info createforms", value=title, id="submit_button", disabled=True) }}
        </div>
        
    </form>
<br>
{% if season %}
    <button onclick="javascript:location.href='{{ url_for('views.season_manager', season=season.id) }}';" class="btn btn-sm createforms2">Back</button>
{% else %}
    <button onclick="javascript:location.href='{{ url_for('views.index') }}';" class="btn btn-sm createforms2">Back</button>
{% endif %}
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const minPlayersSelect = document.getElementById('min_players');
        const minPlayersError = document.getElementById('min_players_error');
        const submitButton = document.getElementById('submit_button');

        // Dynamická validácia pri zmene výberu
        function validateMinPlayers() {
            const minPlayersValue = minPlayersSelect.value;
            let errorMessage = '';

            // Overenie, či je hodnota vybraná
            if (!minPlayersValue) {
                errorMessage = 'Please select a valid number of players.';
            }

            // Zobraz chybové hlásenie alebo ho odstráň
            minPlayersError.textContent = errorMessage;

            // Ak je chyba, tlačidlo je zakázané
            submitButton.disabled = !!errorMessage;
        }

        // Pridanie listeneru na zmenu
        minPlayersSelect.addEventListener('change', validateMinPlayers);

        // Zavolaj validáciu pri načítaní stránky
        validateMinPlayers();
    });
</script>

{% endblock content %}
